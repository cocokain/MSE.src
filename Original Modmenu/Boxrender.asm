( L + DPadRight Open : B Close )
DPad RL UPDown.
未完成modmenu

0x52b300 ; v3
RET
SUB SP,SP,#0x60
STP X29,X30,[SP,#0x50]
STP X28,X27,[SP,#0x40]
STP X26,X25,[SP,#0x30]
STP X24,X23,[SP,#0x20]
STP X22,X21,[SP,#0x10]
STP X20,X19,[SP]
ADD X29,SP,#0x50
BL 0x67db90
MOV X22,X0
ADRP X23,#0x1800000
ADD X23,X23,#0x7C
LDR W27,[X23,#0x24] ; 開閉フラグ(0xA0)
LDR W28,[X23,#0x20] ; 選択位置(0x9C)
LDR X20,[X22,#0x58] ; LocalPlayer
CBZ X20,_EXIT
ADRP X8,#0x1779000
LDR X8,[X8,#0xEC8]
LDR X19,[X8]
LDR X8,[X19]
LDR X21,[X8,#0x60] ; ButtonCheck
MOV X0,X19
MOV W2,#0x23
MOV W1,#0
BLR X21
CMP W0,#0
B.EQ _CHECK_B
MOV X0,X19
MOV W2,#0x3A
MOV W1,#0
BLR X21
CMP W0,#0
B.EQ _CHECK_B
MOV W27,#1
STR W27,[X23,#0x24]
MOV X0,X19 <=_CHECK_B
MOV W2,#0x26
MOV W1,#0
BLR X21
CMP W0,#0
B.EQ _PROC
MOV W27,#0
STR W27,[X23,#0x24]
CBZ W27,_EXIT <=_PROC; 閉じてたら終了
MOV X0,X19
MOV W2,#0x20
MOV W1,#0
BLR X21
CMP W0,#0
B.EQ _K_A_UP
LDRB W9,[X20,#0x195]
CBNZ W9,_UPDN ; 押しっぱなし防止
MOV W11,#1
STRB W11,[X20,#0x195]
ADRP X10,#0x1800000
ADD X10,X10,#0x100
ADD X10,X10,W28,UXTW #2
LDR W11,[X10]
EOR W11,W11,#1
STR W11,X10
B _UPDN
STRB WZR,[X20,#0x195] <=_K_A_UP
MOV X0,X19 <=_UPDN
MOV W2,#0x3B
MOV W1,#0
BLR X21
CMP W0,#0
B.EQ _K_UP
LDRB W9,[X20,#0x193]
CBNZ W9,_D_DN
MOV W11,#1
STRB W11,[X20,#0x193]
SUB W28,W28,#1
CMP W28,#0
B.GE _S_POS
MOV W28,#12
B _S_POS
STRB WZR,[X20,#0x193] <=_K_UP
MOV X0,X19 <=_D_DN
MOV W2,#0x3C
MOV W1,#0
BLR X21
CMP W0,#0
B.EQ _K_DN
LDRB W9,[X20,#0x194]
CBNZ W9,_DRAW
MOV W11,#1
STRB W11,[X20,#0x194]
ADD W28,W28,#1
CMP W28,#12
B.LS _S_POS
MOV W28,#0
STR W28,[X23,#0x20] <=_S_POS
B _DRAW
STRB WZR,[X20,#0x194] <=_K_DN
MOV W25,#150 <=_DRAW ; X
MOV W24,#150 ; Y
MOV W23,#400 ; Width
MOV W22,#60  ; Height
MOV W21,#0   ; Loop Counter
STP W21,W25,[SP,#0x80] <=_L_BOX
ADRP X10,#0x1800000
ADD X10,X10,#0x100
ADD X10,X10,W21,UXTW #2
LDR W11,[X10]
CMP W11,#1
B.NE _COL_OFF
MOVZ W4,#0xFFAA,LSL #16 ; ONの色(青っぽいやつ)
MOVK W4,#0x00FF
B _RENDER
MOVZ W4,#0x0000 <=_COL_OFF ; OFFの色(黒)
MOVK W4,#0x8000,LSL #16
MOV W0,W25 <=_RENDER
MUL W1,W21,W22
ADD W1,W24,W1
MOV W2,W23
MOV W3,W22
MOV W5,#0xFF
BL 0x521620
ADD W0,W25,#2
MUL W1,W21,W22
ADD W1,W24,W1
ADD W1,W1,#2
SUB W2,W23,#4
SUB W3,W22,#4
MOVZ W4,#0xFFFF
MOVK W4,#0xFFFF,LSL #16
MOV W5,#0xFF
BL 0x521620
LDP W21,W25,[SP,#0x80]
ADD W21,W21,#1
CMP W21,#13
B.NE _L_BOX
MOV W0,W25
MUL W1,W28,W22
ADD W1,W24,W1
MOV W2,W23
MOV W3,W22
MOVZ W4,#0x6F6F,LSL #16
MOVK W4,#0x6F6F
MOV W5,#0xFF
BL 0x521620
LDP X20,X19,[SP] <=_EXIT
LDP X22,X21,[SP,#0x10]
LDP X24,X23,[SP,#0x20]
LDP X26,X25,[SP,#0x30]
LDP X28,X27,[SP,#0x40]
LDP X29,X30,[SP,#0x50]
ADD SP,SP,#0x60
RET


0x52b300 ; v3.1
RET
SUB SP,SP,#0x60
STP X29,X30,[SP,#0x50]
STP X28,X27,[SP,#0x40]
STP X26,X25,[SP,#0x30]
STP X24,X23,[SP,#0x20]
STP X22,X21,[SP,#0x10]
STP X20,X19,[SP]
ADD X29,SP,#0x50
BL 0x67db90
MOV X22,X0
ADRP X23,#0x1800000
ADD X23,X23,#0x7C
LDR W27,[X23,#0x24] ; 開閉フラグ(0xA0)
LDR W28,[X23,#0x20] ; 選択位置(0x9C)
LDR X20,[X22,#0x58] ; LocalPlayer
CBZ X20,_EXIT
ADRP X8,#0x1779000
LDR X8,[X8,#0xEC8]
LDR X19,[X8]
LDR X8,[X19]
LDR X21,[X8,#0x60] ; ButtonCheck
MOV X0,X19
MOV W2,#0x23
MOV W1,#0
BLR X21
CMP W0,#0
B.EQ _CHECK_B
MOV X0,X19
MOV W2,#0x3A
MOV W1,#0
BLR X21
CMP W0,#0
B.EQ _CHECK_B
MOV W27,#1
STR W27,[X23,#0x24]
MOV X0,X19 <=_CHECK_B
MOV W2,#0x26
MOV W1,#0
BLR X21
CMP W0,#0
B.EQ _PROC
MOV W27,#0
STR W27,[X23,#0x24]
CBZ W27,_EXIT <=_PROC; 閉じてたら終了
MOV X0,X19
MOV W2,#0x20
MOV W1,#0
BLR X21
CMP W0,#0
B.EQ _K_A_UP
LDRB W9,[X20,#0x195]
CBNZ W9,_UPDN 
MOV W11,#1
STRB W11,[X20,#0x195]
ADRP X10,#0x1800000
ADD X10,X10,#0x100
ADD X10,X10,W28,UXTW #2
LDR W11,[X10]
EOR W11,W11,#1
STR W11,[X10]
B _UPDN
STRB WZR,[X20,#0x195] <=_K_A_UP
MOV X0,X19 <=_UPDN
MOV W2,#0x3B
MOV W1,#0
BLR X21
CMP W0,#0
B.EQ _K_UP
LDRB W9,[X20,#0x193]
CBNZ W9,_D_DN
MOV W11,#1
STRB W11,[X20,#0x193]
SUB W28,W28,#1
CMP W28,#0
B.GE _S_POS
MOV W28,#12
B _S_POS
STRB WZR,[X20,#0x193] <=_K_UP
MOV X0,X19 <=_D_DN
MOV W2,#0x3C
MOV W1,#0
BLR X21
CMP W0,#0
B.EQ _K_DN
LDRB W9,[X20,#0x194]
CBNZ W9,_DRAW
MOV W11,#1
STRB W11,[X20,#0x194]
ADD W28,W28,#1
CMP W28,#12
B.LS _S_POS
MOV W28,#0
STR W28,[X23,#0x20] <=_S_POS
B _DRAW
STRB WZR,[X20,#0x194] <=_K_DN
MOV W25,#150 <=_DRAW ; X
MOV W24,#150 ; Y
MOV W23,#400 ; 横幅
MOV W22,#60  ; 高さ
MOV W21,#0   ; カウンタ
STP W21,W25,[SP,#0x80] <=_L_BOX
ADRP X10,#0x1800000
ADD X10,X10,#0x100
ADD X10,X10,W21,UXTW #2
LDR W11,[X10]
CMP W11,#1
B.NE _COL_OFF
MOVZ W4,#0xFFAA,LSL #16 ; ON: 青
MOVK W4,#0x00FF
B _RENDER_MAIN
MOVZ W4,#0x0000 <=_COL_OFF ; OFF: 黒
MOVK W4,#0x8000,LSL #16
MOV W0,W25 <=_RENDER_MAIN
MUL W1,W21,W22
ADD W1,W24,W1
MOV W2,W23
MOV W3,W22
MOV W5,#0xFF 
BL 0x521620
ADD W0,W25,#2
MUL W1,W21,W22
ADD W1,W24,W1
ADD W1,W1,#2
SUB W2,W23,#4
SUB W3,W22,#4
MOVZ W4,#0xFFFF         ; 白
MOVK W4,#0xFFFF,LSL #16
MOV W5,#0xFF   
BL 0x521620
LDP W21,W25,[SP,#0x80]
ADD W21,W21,#1
CMP W21,#13
B.NE _L_BOX
MOV W0,W25
MUL W1,W28,W22
ADD W1,W24,W1
MOV W2,W23
MOV W3,W22
MOVZ W4,#0x6F6F,LSL #16 
MOVK W4,#0x6F6F
MOV W5,#0x7F 
BL 0x521620
LDP X20,X19,[SP] <=_EXIT
LDP X22,X21,[SP,#0x10]
LDP X24,X23,[SP,#0x20]
LDP X26,X25,[SP,#0x30]
LDP X28,X27,[SP,#0x40]
LDP X29,X30,[SP,#0x50]
ADD SP,SP,#0x60
RET
